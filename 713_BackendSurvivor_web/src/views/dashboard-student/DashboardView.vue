<script setup>
import axios from "axios";
import { onMounted, ref } from "vue";

const dashboardItems = [
  {
    title: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå",
    description: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤",
    linkText: "‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢",
    link: "#",
    icon: "üìÖ",
  },
  {
    title: "‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®",
    description: "‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤",
    linkText: "‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®",
    link: "#",
    icon: "üìÑ",
  },
  {
    title: "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô",
    description: "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤",
    linkText: "‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô",
    link: "#",
    icon: "üí¨",
  },
];

// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® (‡∏°‡∏≤‡∏à‡∏≤‡∏Å API)
const announcements = ref([]);

// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (‡∏°‡∏≤‡∏à‡∏≤‡∏Å API)
const studentProfile = ref({
  name: "",
  studentId: "",
  department: "",
  avatar: "https://cdn-icons-png.flaticon.com/512/4140/4140047.png", 
});

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API
const fetchAnnouncements = async () => {
  try {
    const response = await axios.get("https://api.example.com/announcements"); // ‡πÅ‡∏Å‡πâ URL API
    announcements.value = response.data;
  } catch (error) {
    console.error("Error fetching announcements:", error);
  }
};

const fetchStudentProfile = async () => {
  try {
    const response = await axios.get("https://api.example.com/student-profile"); // ‡πÅ‡∏Å‡πâ URL API
    studentProfile.value = response.data;
  } catch (error) {
    console.error("Error fetching student profile:", error);
  }
};

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
onMounted(() => {
  fetchAnnouncements();
  fetchStudentProfile();
});
</script>

<template>
  <div class="flex flex-col items-center mt-10 w-full">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-5xl">
      <div
        v-for="item in dashboardItems"
        :key="item.title"
        class="bg-white p-6 rounded-xl shadow-md text-center"
      >
        <div class="text-4xl">{{ item.icon }}</div>
        <h2 class="text-lg font-semibold mt-4">{{ item.title }}</h2>
        <p class="text-gray-600 text-sm mt-2">{{ item.description }}</p>
        <a :href="item.link" class="text-blue-500 font-medium mt-4 inline-block hover:underline">
          {{ item.linkText }} ‚Üí
        </a>
      </div>
    </div>

    <div class="mt-10 bg-white p-6 rounded-xl shadow-md w-full max-w-5xl">
      <h2 class="text-xl font-semibold mb-4">üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤</h2>
      <div v-if="announcements.length > 0">
        <div v-for="announcement in announcements" :key="announcement.id" class="mb-4">
          <h3 class="text-lg font-medium">{{ announcement.title }}</h3>
          <p class="text-gray-600">{{ announcement.content }}</p>
          <p class="text-sm text-gray-400">üìÖ {{ announcement.date }}</p>
          <hr class="my-4" />
        </div>
      </div>
      <p v-else class="text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p>
    </div>

    <div class="mt-10 bg-white p-6 rounded-xl shadow-md flex items-center w-full max-w-5xl">
      <div class="flex-shrink-0">
        <img :src="studentProfile.avatar" alt="‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤" class="w-40 h-40 rounded-lg" />
      </div>
      <div class="ml-6">
        <h2 class="text-2xl font-semibold">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h2>
        <p class="mt-2 text-lg"><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> {{ studentProfile.name }}</p>
        <p class="text-lg"><strong>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</strong> {{ studentProfile.studentId }}</p>
        <p class="text-lg"><strong>‡∏†‡∏≤‡∏Ñ‡∏ß‡∏¥‡∏ä‡∏≤:</strong> {{ studentProfile.department }}</p>
      </div>
    </div>
  </div>
</template>
